import{r as u,R as S,j as g}from"./index-G7KIa08V.js";import{c as M}from"./helper-DD-oFgKI.js";var R=new Map,b=new WeakMap,D=0,j=void 0;function _(e){return e?(b.has(e)||(D+=1,b.set(e,D.toString())),b.get(e)):"0"}function C(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?_(e.root):e[t]}`).toString()}function L(e){let t=C(e),r=R.get(t);if(!r){const s=new Map;let o;const i=new IntersectionObserver(a=>{a.forEach(n=>{var c;const h=n.isIntersecting&&o.some(f=>n.intersectionRatio>=f);e.trackVisibility&&typeof n.isVisible>"u"&&(n.isVisible=h),(c=s.get(n.target))==null||c.forEach(f=>{f(h,n)})})},e);o=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:i,elements:s},R.set(t,r)}return r}function V(e,t,r={},s=j){if(typeof window.IntersectionObserver>"u"&&s!==void 0){const c=e.getBoundingClientRect();return t(s,{isIntersecting:s,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:o,observer:i,elements:a}=L(r);let n=a.get(e)||[];return a.has(e)||a.set(e,n),n.push(t),i.observe(e),function(){n.splice(n.indexOf(t),1),n.length===0&&(a.delete(e),i.unobserve(e)),a.size===0&&(i.disconnect(),R.delete(o))}}function $({threshold:e,delay:t,trackVisibility:r,rootMargin:s,root:o,triggerOnce:i,skip:a,initialInView:n,fallbackInView:c,onChange:h}={}){var f;const[v,N]=u.useState(null),m=u.useRef(),[x,I]=u.useState({inView:!!n,entry:void 0});m.current=h,u.useEffect(()=>{if(a||!v)return;let l;return l=V(v,(y,w)=>{I({inView:y,entry:w}),m.current&&m.current(y,w),w.isIntersecting&&i&&l&&(l(),l=void 0)},{root:o,rootMargin:s,threshold:e,trackVisibility:r,delay:t},c),()=>{l&&l()}},[Array.isArray(e)?e.toString():e,v,o,s,i,a,r,c,t]);const p=(f=x.entry)==null?void 0:f.target,E=u.useRef();!v&&p&&!i&&!a&&E.current!==p&&(E.current=p,I({inView:!!n,entry:void 0}));const d=[N,x.inView,x.entry];return d.ref=d[0],d.inView=d[1],d.entry=d[2],d}const T=e=>{const{placeholder:t=null,offset:r=0,...s}=e,{ref:o,inView:i}=$({triggerOnce:!0,rootMargin:`${r||0}px`,...s}),[a,n]=S.useState(!1);return u.useEffect(()=>{i&&n(!0)},[i]),g.jsxs(g.Fragment,{children:[!a&&g.jsx("span",{"data-hide-print":!0,"data-testid":"lazyload-indicator",ref:o}),i?e.children:t]})},U=()=>{const e=u.useRef(!1);return u.useEffect(()=>(e.current=!1,()=>{e.current=!0}),[]),e},B=({width:e,height:t,max:r})=>{if(e===0||t===0)throw new Error("Invalid image size");const{width:s,height:o}=r,i=s/e||1,a=o/t||1,n=Math.min(i,a,1);return{width:e*n,height:t*n}};function W(e){const t=document.createElement("canvas"),r=t.getContext("2d");t.width=1,t.height=1,r.drawImage(e,0,0,1,1);const s=r.getImageData(0,0,1,1).data;return`#${((1<<24)+(s[0]<<16)+(s[1]<<8)+s[2]).toString(16).slice(1)}`}const z="cdn.innei.ren",F=(e,t)=>new URL(e).host===z?`${e}?imageMogr2/thumbnail/${t}x/strip`:e,H=e=>{const{className:t,...r}=e;return g.jsx("hr",{className:M("my-4 h-[0.5px] border-0 bg-black !bg-opacity-30 dark:bg-white",t),...r})},Q=e=>{const{className:t,...r}=e;return g.jsx("span",{className:M("mx-4 inline-block h-full w-[0.5px] select-none bg-black !bg-opacity-30 text-transparent dark:bg-white",t),...r,children:"w"})};export{H as D,T as L,$ as a,Q as b,B as c,F as d,W as g,U as u};
